import { createClient } from '@sanity/client'

const client = createClient({
  projectId: 'xefjjue7',
  dataset: 'production',
  apiVersion: '2024-01-01',
  token: process.env.SANITY_API_TOKEN,
  useCdn: false,
})

const documentId = 'BU6a4jQyI1BbfpIHWqt5Z7'

const generateKey = () => Math.random().toString(36).substring(2, 12)

function textToBlock(text, style = 'normal') {
  if (!text.trim()) return null

  const children = []
  const parts = text.split(/(\*\*[^*]+\*\*)/)

  for (const part of parts) {
    if (part.startsWith('**') && part.endsWith('**')) {
      children.push({
        _type: 'span',
        _key: generateKey(),
        text: part.slice(2, -2),
        marks: ['strong'],
      })
    } else if (part) {
      children.push({
        _type: 'span',
        _key: generateKey(),
        text: part,
        marks: [],
      })
    }
  }

  if (children.length === 0) return null

  return {
    _type: 'block',
    _key: generateKey(),
    style,
    markDefs: [],
    children,
  }
}

function markdownToPortableText(markdown) {
  const blocks = []
  const lines = markdown.split('\n')

  let i = 0
  while (i < lines.length) {
    const line = lines[i].trim()

    if (!line || line.startsWith('# ') || line === 'ï¼' || line === '---') {
      i++
      continue
    }

    if (line.startsWith('â–‹')) {
      blocks.push(textToBlock(line.replace('â–‹', '').trim(), 'h2'))
      i++
      continue
    }

    if (line.match(/^\*\*Q\d+:/)) {
      blocks.push(textToBlock(line, 'h3'))
      i++
      continue
    }

    if (line.startsWith('A:')) {
      blocks.push(textToBlock(line, 'normal'))
      i++
      continue
    }

    if (line.includes('LINE å…è²»è«®è©¢') || line.includes('ðŸ‘‰')) {
      blocks.push({
        _type: 'ctaBlock',
        _key: generateKey(),
        title: 'æƒ³ä¾†æ¸…é‚è¦ªå­æ—…éŠï¼Ÿ',
        description: 'æ¸…å¾®æ—…è¡Œæä¾›å°ˆæ¥­å¸æ©Ÿ + ä¸­æ–‡å°ŽéŠï¼Œè¡Œç¨‹å½ˆæ€§ã€ä¸è¸©é›·ã€‚',
      })
      i++
      continue
    }

    if (line.startsWith('ðŸ“')) {
      i++
      continue
    }

    const block = textToBlock(line, 'normal')
    if (block) blocks.push(block)
    i++
  }

  return blocks.filter(Boolean)
}

const updatedContent = `
æˆ‘çš„éŸ“åœ‹æœ‹å‹ï¼Œåœ¨æ¸…é‚é…’å§æ”¾æ­Œæ™‚è¢«ç§»æ°‘å±€ç•¶å ´é€®æ•ï¼Œé—œäº† 13 å¤©ã€‚

é€™ä¸æ˜¯æ–°èžæ¨™é¡Œï¼Œæ˜¯æˆ‘è¦ªçœ¼çœ‹è‘—ç™¼ç”Ÿçš„äº‹ã€‚

â–‹èªè­˜é€™ä½éŸ“åœ‹ DJ

æˆ‘å€‘åœ¨æ¸…é‚å¤§å­¸çš„ä¸€å¹´åˆ¶æ³°æ–‡ç­èªè­˜ã€‚

ä»–æ˜¯ DJï¼Œæ³°æ–‡è¬›å¾—æ¯”æˆ‘å¥½ä¸Šå¥½å¹¾å€‹æª”æ¬¡ï¼Œé«˜é«˜å¸¥å¸¥åˆå¾ˆæœƒèŠå¤©ã€‚é‚£ç¨®ç¤¾äº¤èƒ½åŠ›ï¼Œæˆ‘åªèƒ½ç”¨ã€Œé ‚ç´šã€ä¾†å½¢å®¹â€”â€”åœ¨é…’å§è£¡è·Ÿæ³°åœ‹äººæŠŠé…’è¨€æ­¡ã€æ·±å…¥äº¤æµï¼Œå®Œå…¨æ²’æœ‰èªžè¨€éš”é–¡ã€‚

é è‘—é€™ç¨®èƒ½åŠ›ï¼Œä»–å¾ˆå¿«èžå…¥æ¸…é‚ç•¶åœ°çš„ DJ åœˆã€‚èªè­˜é…’å§è€é—†ã€æ‹‰è¿‘é—œä¿‚ã€äº’ç›¸è½‰ä»‹ï¼Œ2025 å¹´ä»–å¹¾ä¹Žæ¯é€±éƒ½æœ‰ bar å¯ä»¥æ”¾æ­Œã€‚

çœ‹èµ·ä¾†ä¸€åˆ‡éƒ½å¾ˆé †åˆ©ã€‚

â–‹2024 å¹´ 12 æœˆï¼šè‡‰æ›¸æ»‘åˆ°ä»–è¢«æ•çš„ç…§ç‰‡

å¥½æ™¯ä¸å¸¸ï¼Œ12 æœˆä¸€åˆ‡è®Šäº†èª¿ã€‚

é‚£æ™‚æˆ‘å¸¶è€å©†å’Œå¥³å…’å›žå°ç£ï¼Œå¤§æ¦‚æ˜¯ 12 æœˆ 10 è™Ÿå·¦å³ã€‚è€å©†æ»‘è‡‰æ›¸æ™‚çªç„¶å«æˆ‘éŽåŽ»çœ‹â€”â€”æ¸…é‚æ–°èžçš„å®˜æ–¹ç²‰å°ˆï¼Œæœ‰ä¸€å¼µé€®æ•ç…§ç‰‡ã€‚

è‡‰æ‰“äº†é¦¬è³½å…‹ï¼Œä½†é‚£å€‹èº«é«˜ã€é‚£å€‹ç‰¹å¾µï¼Œæˆ‘ä¸€çœ‹å°±çŸ¥é“æ˜¯ä»–ã€‚

æˆ‘å€‘éƒ½åš‡åˆ°äº†ã€‚

â–‹IG å‚³è¨Šæ¯ï¼Œä»–èªªå·²ç¶“åœ¨ç›£ç„è£¡å¥½å¹¾å¤©äº†

æˆ‘é¦¬ä¸Šå‚³è¨Šæ¯é—œå¿ƒã€‚

ä»–å›žè¦†çš„å…§å®¹è®“æˆ‘å°è±¡å¾ˆæ·±ï¼šã€Œå·²ç¶“åœ¨æ¸…é‚çš„ç›£ç„è£¡è¢«é—œå¥½å¹¾å¤©äº†ã€‚ã€

æˆ‘å•ä»–éœ€è¦ä»€éº¼å¹«å¿™ï¼Œä»–èªªï¼šã€Œèƒ½ä¸èƒ½é€ä¸€äº›é£Ÿç‰©éŽåŽ»ï¼Ÿã€

å¤©å•Šã€‚æˆ‘ç•¶ä¸‹åªæœ‰ä¸€å€‹å¿µé ­â€”â€”å¤ªæ…˜äº†ã€‚

â–‹æ¸…é‚ç›£ç„é—œäº† 13 å¤©

å¾Œä¾†æˆ‘å€‘ 2026/1/15 åœ¨æ¸…é‚ç¢°é¢ï¼Œä»–æ‰è·Ÿæˆ‘å€‘å®Œæ•´è¬›äº†é€™æ®µç¶“æ­·ã€‚

ä»–èªªï¼Œå…¶å¯¦ä¸ç”¨é—œé‚£éº¼ä¹…ã€‚

æœƒæ‹–åˆ° 13 å¤©ï¼Œæ˜¯å› ç‚ºæ³°åœ‹ç•¶å±€è¦ç­‰ã€ŒåŒæ¨£ç‹€æ³çš„äººã€ä¸€èµ·è™•ç†â€”â€”å°±æ˜¯é‚£äº›æ²’æœ‰å·¥ä½œç°½ã€å»åœ¨æ³°åœ‹åšç”Ÿæ„æˆ–æ‰“å·¥è¢«æŠ“çš„äººã€‚æ¹Šé½Šäº†ï¼Œæ‰æœƒä¸€æ‰¹é£è¿”ã€‚

æˆ‘è‡ªå·±çš„çŒœæ¸¬æ˜¯ï¼Œä¸€å®šæœ‰äººçœ¼ç´…åŽ»æª¢èˆ‰ä»–ã€‚ç•¢ç«Ÿä¸€å †ç·¬ç”¸äººä¹Ÿåœ¨éžæ³•æ‰“å·¥ï¼Œæ€Žéº¼éƒ½æ²’äº‹ï¼Ÿä½†ä»–ä¸€å€‹éŸ“åœ‹äººï¼Œé«˜èª¿åœ¨å„å¤§é…’å§æ”¾æ­Œï¼Œå¤ªå®¹æ˜“æˆç‚ºç›®æ¨™ã€‚

â–‹è½‰ç§»åˆ°æ›¼è°·ï¼šåŽŸæœ¬è¦å 9 å°æ™‚çš„è»Š

é—œå®Œ 13 å¤©ï¼Œä¸‹ä¸€æ­¥æ˜¯è½‰ç§»åˆ°æ›¼è°·ç§»æ°‘å±€è¾¦é£è¿”æ‰‹çºŒã€‚

é€™å€‹éŽç¨‹æœ‰å¤šæ²’æ•ˆçŽ‡ï¼ŸåŽŸæœ¬çš„å®‰æŽ’æ˜¯ï¼šå¾žæ¸…é‚ã€Œåè»Šã€åˆ°æ›¼è°·ã€‚

ä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰æ¦‚å¿µï¼Œé€™å–®è¶Ÿæœ€å°‘è¦ 9 å°æ™‚ã€‚ä¾†å›žå°±æ˜¯å…©å¤©èµ·è·³ï¼Œè€Œä¸”æœ€å¾Œé‚„è¦å¾žæ›¼è°·é£è¿”å›žéŸ“åœ‹ï¼Œä¸æ˜¯å›žæ¸…é‚ã€‚

å¥½åœ¨ä»–èº«é‚ŠçœŸçš„æœ‰å¾ˆå¤šæ³°åœ‹æœ‹å‹å¹«å¿™ï¼Œæœ€å¾Œæ‰å¾—ä»¥æ”¹æ­é£›æ©Ÿã€‚

ä»£åƒ¹æ˜¯ï¼šè¦è‡ªå·±ä»˜ä¸€ä½è­¦å¯Ÿçš„ä¾†å›žæ©Ÿç¥¨éŒ¢ã€‚

ä½†ä»–æ²’å¾—é¸ï¼Œé€™å·²ç¶“æ˜¯æœ€å¥½çš„é¸é …äº†ã€‚

â–‹æ›¼è°·ç›£ç„ï¼šåªå¾…äº†ä¸€å¤©ï¼Œä½†ä»–èªªé‚£è£¡æ‰å¯æ€•

åˆ°äº†æ›¼è°·ï¼Œåˆæ˜¯å¦ä¸€ä½ç•¶åœ°æ³°åœ‹æœ‹å‹å‡ºæ‰‹å¹«å¿™ã€‚

æœ€å¾Œä»–åªè¢«é—œäº†ä¸€å¤©ã€‚

ä»–èªªï¼Œå¥½éšªåªæœ‰ä¸€å¤©ã€‚å› ç‚ºæ›¼è°·é‚£é‚Šé—œçš„éƒ½æ˜¯é‡åˆ‘çŠ¯ï¼Œç’°å¢ƒè·Ÿæ¸…é‚å®Œå…¨ä¸èƒ½æ¯”ï¼Œã€Œæ ¹æœ¬ä¸æ˜¯äººå¾…çš„åœ°æ–¹ã€ã€‚

å¦‚æžœæ²’æœ‰èªè­˜çš„äººï¼Œä»–çœŸçš„ä¸çŸ¥é“è©²æ€Žéº¼æ’éŽåŽ»ã€‚

â–‹12/28ï¼šæƒ³å›žæ¸…é‚è·¨å¹´ï¼Œå»è¢«åŽŸåœ°é£è¿”

é£è¿”å›žéŸ“åœ‹ä¹‹å¾Œï¼Œä»–é‚„æ˜¯å¾ˆæƒ³å›žä¾†æ¸…é‚è·Ÿæœ‹å‹è·¨å¹´ã€‚

12 æœˆ 28 è™Ÿï¼Œä»–é£›å›žä¾†äº†ã€‚

çµæžœåœ¨æµ·é—œè¢«æ””ä¸‹ä¾†ï¼šã€Œä½ ä¸èƒ½ç”¨å…ç°½å…¥å¢ƒï¼Œè¦ç”³è«‹ TR è§€å…‰ç°½ã€‚ã€

å•é¡Œæ˜¯ï¼ŒéŸ“åœ‹è·Ÿå°ç£ä¸€æ¨£æœ¬ä¾†å°±æ˜¯å…ç°½åœ‹ï¼ŒTR è§€å…‰ç°½å·²ç¶“å¾ˆä¹…æ²’æœ‰æ—…è¡Œç¤¾åœ¨è¾¦äº†ã€‚ä»–é€™ç¨®ã€Œæ›¾ç¶“è¢«é£è¿”ã€çš„ç‰¹æ®Šæ¡ˆä¾‹ï¼Œæ ¹æœ¬ä¸çŸ¥é“æ‰¾èª°è™•ç†ã€‚

ç•¶å¤©ï¼Œä»–è¢«åŽŸåœ°é£è¿”å›žéŸ“åœ‹ã€‚

æ˜¯æˆ‘çš„è©±ï¼Œå¤§æ¦‚æ—©å°±æ”¾æ£„äº†ã€‚ä½†ä»–æ˜¯çœŸçš„å¾ˆæ„›æ¸…é‚ã€‚

â–‹å›žéŸ“åœ‹æ‰¾ agentï¼Œæœ‰äººèªªä¸è¡Œï¼Œæœ‰äººé–‹åƒ¹

å›žåˆ°éŸ“åœ‹ä¹‹å¾Œï¼Œä»–é–‹å§‹æ‰¾å„ç¨® agent è™•ç†é€™å€‹æ¡ˆå­ã€‚

æœ‰äº› agent ç›´æŽ¥èªªï¼šã€Œé€™ç¨® case æˆ‘å€‘ä¸æŽ¥ã€‚ã€

æœ‰äº›èªªå¯ä»¥ï¼Œä½†è¦æ”¶è²»ã€‚

é‚£æ®µæ™‚é–“æˆ‘å¹«ä»–æ“¬äº†ä¸€å°ä¿¡ï¼Œæ˜¯è¦å¯„çµ¦æ³°åœ‹ç§»æ°‘å±€è©¢å•çš„â€”â€”ç¢ºèªä»–é€™ç¨®æƒ…æ³èƒ½ä¸èƒ½ç”³è«‹ TR ç°½ã€é‚„æ˜¯è¦èµ°å…¶ä»–ç®¡é“ã€‚

ä»–å¾Œä¾†è·Ÿæˆ‘èªªï¼šã€Œä½ å¯«çš„é‚£å°ä¿¡çœŸçš„å¹«äº†å¤§å¿™ã€‚ã€

â–‹èŠ±äº† 25,000 æ³°éŠ–ï¼Œçµ‚æ–¼åœ¨ 12/31 å›žåˆ°æ¸…é‚

æœ€å¾Œä»–ä»˜äº† 25,000 æ³°éŠ–çµ¦ agent è™•ç†ï¼Œé€™é‚„ä¸åŒ…å«æ©Ÿç¥¨ã€‚

æ²’å¾—é¸ã€‚é€™æ˜¯å”¯ä¸€èƒ½è®“ä»–åˆæ³•å…¥å¢ƒçš„æ–¹å¼ã€‚

12 æœˆ 31 è™Ÿï¼Œä»–çµ‚æ–¼æˆåŠŸå›žåˆ°æ¸…é‚ï¼Œè¶•ä¸Šè·¨å¹´ã€‚

â–‹é€™ä»¶äº‹æ•™æœƒæˆ‘çš„ä¸‰ä»¶äº‹

**ç¬¬ä¸€ï¼Œåˆæ³•ç°½è­‰æ˜¯åº•ç·šã€‚**

æ²’æœ‰å·¥ä½œç°½ï¼Œå°±æ˜¯ä¸èƒ½åœ¨æ³°åœ‹å·¥ä½œè³ºéŒ¢ã€‚ä¸ç®¡ä½ æ³°æ–‡å¤šå¥½ã€äººè„ˆå¤šå»£ã€èžå…¥å¾—å¤šæ·±ï¼Œè¢«æŠ“åˆ°å°±æ˜¯æ‹˜ç•™ã€é£è¿”ã€ä¸Šé»‘åå–®ã€‚

**ç¬¬äºŒï¼Œåœ¨æ³°åœ‹ï¼Œé—œä¿‚å¤ªé‡è¦äº†ã€‚**

ä»–èƒ½å°‘å—å¾ˆå¤šè‹¦ï¼Œå…¨é é‚£äº›æ³°åœ‹æœ‹å‹å¹«å¿™â€”â€”æ”¹æ­é£›æ©Ÿã€æ›¼è°·ç›£ç„åªå¾…ä¸€å¤©ã€æ‰¾åˆ°é¡˜æ„æŽ¥æ¡ˆçš„ agentã€‚æ²’æœ‰é€™äº›äººï¼Œå¾Œæžœä¸æ•¢æƒ³åƒã€‚

**ç¬¬ä¸‰ï¼Œèƒ½èŠ±éŒ¢è§£æ±ºçš„äº‹æƒ…éƒ½æ˜¯å°äº‹ã€‚**

25,000 æ³°éŠ–ä¸ä¾¿å®œï¼Œä½†è‡³å°‘å•é¡Œè§£æ±ºäº†ã€‚çœŸæ­£å¯æ€•çš„æ˜¯ï¼šæ²’éŒ¢ã€æ²’äººè„ˆã€æ²’æœ‰äººå¹«ä½ ã€‚

â–‹è£œå……ï¼šED æ•™è‚²ç°½è­‰ä¹Ÿåœ¨æ”¶ç·Š

é †å¸¶ä¸€æï¼Œæˆ‘å€‘ç•¶åˆåœ¨æ¸…é‚å¤§å­¸å¿µæ³°æ–‡ç”¨çš„ ED æ•™è‚²ç°½ï¼Œç¾åœ¨ä¹Ÿè¶Šä¾†è¶Šé›£æžäº†ã€‚

2025 å¹´æ³°åœ‹æ”¿åºœé–‹å§‹åš´æŸ¥ï¼Œèª²ç¨‹ä¸Šé™å¾žä¸€å¹´ç¸®çŸ­åˆ° 180 å¤©ï¼Œå‡ºå¸­çŽ‡è¦é”åˆ° 80% ä»¥ä¸Šï¼Œå…‰æ˜¯åŽ»å¹´å°±æœ‰å°‡è¿‘ä¸€è¬å¼µå­¸ç”Ÿç°½è¢«æ’¤éŠ·ã€‚åŽŸå› éƒ½ä¸€æ¨£ï¼šæœ‰äººæ‹¿å­¸ç”Ÿç°½ç•¶æŽ©è­·ï¼Œå¯¦éš›åœ¨æ‰“é»‘å·¥ã€‚

æƒ³é  ED ç°½é•·å±…çš„äººï¼Œè¦æœ‰å¿ƒç†æº–å‚™ã€‚

â–‹å¸¸è¦‹å•é¡Œ FAQ

**Q1: ç”¨è§€å…‰å…ç°½å¯ä»¥åœ¨æ³°åœ‹æ‰“å·¥å—Žï¼Ÿ**

A: çµ•å°ä¸è¡Œã€‚ä¸ç®¡æ˜¯å…ç°½é‚„æ˜¯è§€å…‰ç°½ï¼Œéƒ½æ˜Žç¢ºç¦æ­¢å·¥ä½œã€‚è¢«æŠ“åˆ°çš„å¾Œæžœå°±æ˜¯æˆ‘æœ‹å‹çš„é­é‡ï¼šæ‹˜ç•™ã€é£è¿”ã€é»‘åå–®ï¼Œä¸‹æ¬¡å…¥å¢ƒé›£ä¸ŠåŠ é›£ã€‚

**Q2: æˆ‘åªæ˜¯æƒ³ä¾†æ¸…é‚æ—…éŠï¼Œéœ€è¦æ“”å¿ƒå—Žï¼Ÿ**

A: å®Œå…¨ä¸ç”¨ã€‚é€™ç¯‡æ˜¯å¯«çµ¦æƒ³ã€Œé•·æœŸå±…ç•™ã€çš„äººçœ‹çš„ã€‚å¦‚æžœä½ åªæ˜¯ä¾†çŽ©ï¼Œéµå®ˆå…ç°½ 60 å¤©çš„è¦å®šã€å¡«å¥½ TDAC æ•¸ä½å…¥å¢ƒå¡ã€å¸¶å¤ æ—…è²»ï¼Œé–‹é–‹å¿ƒå¿ƒä¾†çŽ©å°±å¥½ã€‚

â–‹çµèªž

é€™ç¯‡æ–‡ç« æ²’æœ‰è¦åš‡èª°ï¼Œåªæ˜¯æƒ³æŠŠæœ‹å‹çš„çœŸå¯¦ç¶“æ­·è¨˜éŒ„ä¸‹ä¾†ã€‚

åœ¨æ³°åœ‹ï¼Œæœ‰é—œä¿‚å°±æ²’é—œä¿‚ã€‚ä½†åœ¨é‚£ä¹‹å‰ï¼Œä½ å¾—å…ˆå®ˆæ³•ã€‚

æƒ³é•·å±…æ¸…é‚æˆ–æ³°åœ‹ï¼Œä¸ç®¡æ˜¯å©šå§»ç°½ã€å·¥ä½œç°½ã€ç²¾è‹±ç°½é‚„æ˜¯ DTVï¼Œå…ˆæžå®šåˆæ³•èº«ä»½ï¼Œå…¶ä»–çš„æ‰æœ‰æ„ç¾©ã€‚

å¦‚æžœä½ æ˜¯ä¾†æ¸…é‚æ—…éŠçš„å®¶åº­ï¼Œä¸ç”¨æ“”å¿ƒé€™äº›ï¼Œå°ˆå¿ƒçŽ©å°±å¥½ã€‚éœ€è¦åŒ…è»Šæœå‹™ï¼Œæ­¡è¿Žæ‰¾æˆ‘å€‘èŠèŠã€‚
`

async function forceUpdate() {
  console.log('Getting current document...')
  const doc = await client.getDocument(documentId)

  if (!doc) {
    console.error('Document not found!')
    process.exit(1)
  }

  console.log('Converting content...')
  const body = markdownToPortableText(updatedContent)

  console.log('Updating document...')
  const updated = {
    ...doc,
    body,
  }

  const result = await client.createOrReplace(updated)
  console.log('Done! Document updated:', result._id)

  // Verify
  const verify = await client.getDocument(documentId)
  const bodyText = JSON.stringify(verify.body)
  console.log('Verification:')
  console.log('- Contains æ³°éŠ–:', bodyText.includes('æ³°éŠ–'))
  console.log('- Contains éŽæ¸¡å¥:', bodyText.includes('å¦‚æžœä½ æ˜¯ä¾†æ¸…é‚æ—…éŠçš„å®¶åº­'))
}

forceUpdate()
